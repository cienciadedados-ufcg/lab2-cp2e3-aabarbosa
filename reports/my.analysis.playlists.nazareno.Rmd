---
title: "Playlists nazareno"
output: html_notebook
---

```{r}
library(tidyverse)
library(viridis)
library(here)
theme_set(theme_minimal())
```

```{r}
playlist = read_csv("../data/playlists_nazareno.csv")
```

Qual a música mais triste de cada artista em cada ano? 

```{r}

top10 <- merged %>% 
        group_by(track_name) %>%
        summarise(artist_name = head(artist_name,1),
                  # cuz a song can have multiple artist
                  plays = n_distinct(played_at)) %>%
        arrange(-plays) %>%
        head(10)
top10

forró %>% 
    group_by(artist, album_release_date) %>% 
    summarise(humor_do_ano = min(valence)) %>% 
    ggplot(aes(x = album_release_date, 
               group = artist,
               color = artist,
               y = humor_do_ano)) + 
    geom_line() + 
    geom_point()
```

```{r}
p = forró %>% 
    arrange(album_release_date) %>% 
    ggplot(aes(x = energy, 
               group = artist,
               color = artist,
               label = track_name,
               y = valence)) + 
    geom_point(size = .8, alpha = .8) 

plotly::ggplotly(p)
```
```{r}
forró %>% 
    arrange(album_release_date) %>% 
    ggplot(aes(x = energy, 
               group = artist,
               label = track_name,
               y = valence)) + 
    stat_density2d(aes(fill=..level..), geom="polygon") +
    scale_fill_viridis() + 
    # geom_density2d() + # ou o stat_density ou geom_density
    facet_wrap(~artist)
```

